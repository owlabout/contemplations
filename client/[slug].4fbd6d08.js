import{S as t,i as a,s,e as o,c as e,b as r,f as c,h as n,j as i,v as p,a as d,t as l,g as m,d as h,E as u,H as f,k as g,x as k,p as y,q as $,A as b,G as v}from"./index.4783f61a.js";import{F as E,l as x}from"./_layout.f32b99db.js";function j(t){var a,s;return{c(){a=o("meta"),this.h()},l(t){a=e(t,"META",{name:!0,content:!0},!1),r(a).forEach(c),this.h()},h(){n(a,"name","Description"),n(a,"content",s=t.post.metadata.description)},m(t,s){i(t,a,s)},p(t,o){t.post&&s!==(s=o.post.metadata.description)&&n(a,"content",s)},d(t){t&&c(a)}}}function A(t){var a,s,v,x,A,D,L,V,w,H,I,M,T,_=t.post.html+"";document.title=a=t.post.title;var q=t.post.metadata.description&&j(t),B=new E({});return{c(){q&&q.c(),s=p(),v=d(),x=o("div"),A=d(),D=o("nav"),L=o("a"),V=l("Back"),w=d(),H=o("div"),I=d(),M=o("div"),B.$$.fragment.c(),this.h()},l(t){q&&q.l(t),s=p(),v=m(t),x=e(t,"DIV",{class:!0,style:!0},!1),r(x).forEach(c),A=m(t),D=e(t,"NAV",{},!1);var a=r(D);L=e(a,"A",{href:!0},!1);var o=r(L);V=h(o,"Back"),o.forEach(c),a.forEach(c),w=m(t),H=e(t,"DIV",{class:!0},!1),r(H).forEach(c),I=m(t),M=e(t,"DIV",{class:!0},!1);var n=r(M);B.$$.fragment.l(n),n.forEach(c),this.h()},h(){n(x,"class","background"),u(x,"--background-image","url("+t.post.metadata.background+")"),u(x,"--background-color-left",t.post.metadata.colorLeft),u(x,"--background-color-right",t.post.metadata.colorRight),n(L,"href","/"),n(H,"class","post-container"),f(H,"has-sticky",t.sticky),n(M,"class","footer-container svelte-8fy71")},m(t,a){q&&q.m(document.head,null),g(document.head,s),i(t,v,a),i(t,x,a),i(t,A,a),i(t,D,a),g(D,L),g(L,V),i(t,w,a),i(t,H,a),H.innerHTML=_,i(t,I,a),i(t,M,a),k(B,M,null),T=!0},p(t,o){T&&!t.post||a===(a=o.post.title)||(document.title=a),o.post.metadata.description?q?q.p(t,o):((q=j(o)).c(),q.m(s.parentNode,s)):q&&(q.d(1),q=null),T&&!t.post||(u(x,"--background-image","url("+o.post.metadata.background+")"),u(x,"--background-color-left",o.post.metadata.colorLeft),u(x,"--background-color-right",o.post.metadata.colorRight)),T&&!t.post||_===(_=o.post.html+"")||(H.innerHTML=_),t.sticky&&f(H,"has-sticky",o.sticky)},i(t){T||(y(B.$$.fragment,t),T=!0)},o(t){$(B.$$.fragment,t),T=!1},d(t){q&&q.d(t),c(s),t&&(c(v),c(x),c(A),c(D),c(w),c(H),c(I),c(M)),b(B)}}}async function D({params:t,query:a}){const{year:s,month:o,slug:e}=t,r=await this.fetch(`posts/${s}/${o}/${e}.json`),c=await r.json();if(200===r.status)return{post:c};this.error(r.status,c.message)}function L(t,a,s){let o,{post:e}=a;return v(()=>{x.set(e.metadata.lang)}),t.$set=(t=>{"post"in t&&s("post",e=t.post)}),t.$$.update=((t={post:1})=>{t.post&&s("sticky",o=e.html.indexOf("sticky__container")>0)}),{post:e,sticky:o}}export default class extends t{constructor(t){super(),a(this,t,L,A,s,["post"])}}export{D as preload};
