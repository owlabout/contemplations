const markdownContainer = require("markdown-it-container");

export default function mdSticky(md) {
  md.use(markdownContainer, "hero", {
    render(tokens, idx) {
      const info = tokens[idx].info;
      const color = info.replace(/^hero(.*)$/, `$1`).trim();
      if (tokens[idx].nesting === 1) {
        return `<div class="hero__container" ${
          color ? ` style='--color-hero: ${color};'` : ""
        }>`;
      } else {
        return "</div>";
      }
    }
  });

  md.use(markdownContainer, "footnote", {
    render(tokens, idx) {
      const text = tokens[idx].content.replace(
        /:::footnote(.*?):::/g,
        (match, variableName) => {
          console.log("match", match, "vn", variableName);
          return variableName.trim();
        }
      );
      tokens[idx].content = text;
      if (tokens[idx].nesting === 1) {
        return `<div><div>1</div><div class="footnote-container">${text}`;
      } else {
        return "</div></div>";
      }
    }
  });
}
